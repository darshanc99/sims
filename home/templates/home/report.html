{% extends 'home/base.html' %}
{% block content %}
{% if message %}
	<div class="alert alert-info" role="alert">
	  {{message}}
	</div>
{% endif %}
{% if admin %}
<br><br>
<div class="container">
	{% if verified %}
		<div class="col-md-6">
			<div class="card">
			<article class="card-body">
				<form action="{% url 'report' %}" method="POST">
					{% csrf_token %}
					<div class="form-row">
						<div class="form-group col-md-6">
						  <label>Start Date</label>
						  <input type="date" class="form-control" name="start_date" required>
						</div> <!-- form-group end.// -->
						<div class="form-group col-md-6">
						  <label>End Date</label>
							<input type="date" class="form-control" name="end_date" required>
						</div> <!-- form-group end.// -->
					</div> <!-- form-row.// -->
					<div class="form-group">
							<button type="submit" class="btn btn-primary btn-block"> Apply Filters </button>
					</div> <!-- form-group// -->
			</form>
  			</article> <!-- card-body end .// -->
  		</div> <!-- col.//-->
  	</div> <!-- row.//-->
		<br>
		<mark><i><b>Note: The default Report shows you the report right from the day SIMS was born, until now!</b></i></mark><br>
		{% if text %}
			<mark>{{text | safe}}</mark><br>
		{% endif %}
		<br>
    <h4><b>Report</b></h4>
      <table class="table table-responsive" style="max-height:500px;">
        <thead class="table-dark">
          <tr>
            <th scope="col">Committed By</th>
            <th scope="col">Product Name</th>
            <th scope="col">Timestamp</th>
            <th scope="col">Operation</th>
            <th scope="col">Initial Quantity</th>
            <th scope="col">Change of</th>
            <th scope="col">Final Quantity</th>
          </tr>
        </thead>
        <tbody>
          {% for operation in operations %}
            <tr>
              <th scope="row"><a href="mailto: {{operation.issued_by}}">{{operation.issued_by}}</a></th>
              <th scope="row">{{operation.product_name}}</th>
              <th scope="row">{{operation.timestamp}}</th>
              <th scope="row">{{operation.operation}}</th>
              <th scope="row">{{operation.initial_quantity}}</th>
              {% if operation.operation == 'addition' %}
                <th scope="row" style="color: green">+{{operation.quantity}}</th>
              {% else %}
                <th scope="row" style="color: red">-{{operation.quantity}}</th>
              {% endif %}
              <th scope="row">{{operation.final_quantity}}</th>
            </tr>
          {% endfor %}
        </tbody>
      </table>
	{% else %}
		<div class="alert alert-danger" role="alert">
		<h6 style="color:yellow"><b>The Account is currently being verified by the Admin.
			In case of urgency, contact the Admin.<br><span style="color:black">Thank You for your co-operation!</span></b></h6>
		</div>
	{% endif %}
{% endif %}
{% endblock %}
